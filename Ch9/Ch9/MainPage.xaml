<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Ch9"         
             x:Class="Ch9.MainPage"
             Title="Movies"
             x:Name="mainPage"
             >

    <ContentPage.ToolbarItems>
        <ToolbarItem Icon="settings2.png" Order="Primary" Text="Settings" Clicked="OnSettingsButton_Clicked"/>
    </ContentPage.ToolbarItems>

    <StackLayout x:Name="mainPageStackLayout" Orientation="Vertical" Padding="5,0,5,5">
        

        <SearchBar Placeholder="Title" Text="{Binding Source={x:Reference mainPage}, Path=SearchString}" FontSize="Medium" TextChanged="SearchBar_TextChanged"/>
        <Label x:Name="searchLabel" Text="type at least five characters" IsVisible="False"/>

        <ListView x:Name="listView" HasUnevenRows="True" ItemTapped="ListView_ItemTapped">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        
                        <StackLayout Orientation="Horizontal" Padding="5">

                            <Image>
                                <Image.Source>
                                    <UriImageSource Uri="{Binding ImgSmSrc}"
                                                    CacheValidity="0"
                                                    CachingEnabled="False"                                                    
                                                    />                                                                                                          
                                </Image.Source>                                
                            </Image>

                            <StackLayout HorizontalOptions="StartAndExpand" Orientation="Vertical">
                                <Label Text="{Binding Title}" TextColor="Black"/>
                                <StackLayout Orientation="Horizontal">
                                    <Label TextColor="Gray" Text="{Binding Year}" FontSize="Micro"/>
                                    <Label TextColor="Gray" Text="{Binding Genre}" FontSize="Micro"/>
                                </StackLayout>
                            </StackLayout>                            
                        </StackLayout>                        
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Grid.Row="0" Text="Trending" TextColor="White" BackgroundColor="Blue" FontAttributes="Bold" FontSize="Large" Clicked="Trending_Clicked" />
        </Grid>
        
    </StackLayout>

</ContentPage>
